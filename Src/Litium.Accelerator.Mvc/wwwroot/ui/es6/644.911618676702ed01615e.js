(self.webpackChunk=self.webpackChunk||[]).push([[644],{5644:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>ae});var l=a(7378),c=a(8036),r=a(5319),s=a(4336),n=a(8997),o=a(9453);const m=e=>({type:o.Ke,payload:{isBusinessCustomer:e}}),i=(e,t)=>({type:o.s0,payload:{key:e,data:t}}),d=e=>(t,a)=>{t({type:o.Dq,payload:{selectedDeliveryMethod:e}});const{payload:l}=a().checkout;return(0,r.gz)("/api/checkout/setDeliveryProvider",l).then((e=>e.json())).then((e=>{t((0,s.zD)()),null!==e&&e.paymentWidget&&t(v(e.paymentWidget))})).catch((e=>t((0,n.K)(e,(e=>N(e))))))},u=e=>(t,a)=>{t({type:o.Os,payload:{selectedCountry:e}});const{payload:l}=a().checkout;return t(v(null)),(0,r.gz)("/api/checkout/setCountry",l).then((e=>e.json())).then((e=>{t((0,s.zD)()),t(v(e.paymentWidget)),t({type:o.Dq,payload:{deliveryMethods:e.deliveryMethods,selectedDeliveryMethod:e.selectedDeliveryMethod}}),t({type:o.Ub,payload:{paymentMethods:e.paymentMethods,selectedPaymentMethod:e.selectedPaymentMethod}})})).catch((e=>t((0,n.K)(e,(e=>N(e))))))},h=e=>(t,a)=>{t({type:o.Ub,payload:{selectedPaymentMethod:e}});const{payload:l}=a().checkout;return t(v(null)),t(N({modelState:{payment:[]}})),(0,r.gz)("/api/checkout/setPaymentProvider",l).then((e=>e.json())).then((e=>{t((0,s.zD)()),t(v(e.paymentWidget))})).catch((e=>t((0,n.K)(e,(e=>N(e))))))},p=()=>(e,t)=>{const{payload:a}=t().checkout;return(0,r.gz)("/api/checkout/reloadPaymentWidget",a).then((e=>e.json())).then((t=>{t&&t.paymentWidget&&e(v(t.paymentWidget))})).catch((t=>e((0,n.K)(t,(e=>N(e))))))},v=e=>({type:o.JQ,payload:{paymentWidget:e}}),y=e=>({type:o.ei,payload:{discountCode:e}}),E=e=>({type:o.Oh,payload:{usedDiscountCodes:e}}),k=(e,t,a)=>(0,r.v_)(e,t).then((e=>e.json())).then((e=>{a(_(e))})).catch((e=>{e.response?e.response.json().then((e=>{a(N(e)),a(_(null)),a((0,s.zD)())})):a(N(e)),a(g(!0))})),_=e=>({type:o.nY,payload:{result:e}}),N=e=>({type:o.xy,payload:{error:e}}),g=e=>({type:o.Cx,payload:{enableConfirmButton:e}}),f=e=>({type:o.yw,payload:{isValidating:e}});var C=a(4447);const b=({onClick:e,title:t,disabled:a=!1,type:c="button",fluid:r=!1,rounded:s=!1,isLink:n=!1})=>{const o=(0,l.useCallback)((()=>{const e=["button"];return r&&e.push("expanded"),s&&e.push("rounded"),n&&e.push("link"),e.join(" ")}),[r,s,n]);return l.createElement("button",{className:o(),onClick:e,disabled:a,type:c},t)};var I=a(1829);const w={},D=(0,I.Z)(((e,t,a)=>{w[e]=new AbortController,a((0,s.Vx)(e,t,w[e])).then((()=>a(p()))).catch((e=>a((0,n.K)(e,(e=>(0,s.Lx)(e))))))}),500),A=()=>{const e=(0,c.I0)(),[t,a]=(0,l.useState)({}),r=(0,c.v9)((e=>e.cart)),[n,o]=(0,l.useState)(r?.orderRows),{discountRows:m}=r;(0,l.useEffect)((()=>{o(r?.orderRows)}),[r]);const i=(0,l.useCallback)((t=>e((0,s.Vx)(t,0)).then((()=>e(p())))),[e]),d=(0,l.useCallback)(((t,a,l,c=!0)=>{let r=parseFloat(a),s=!isNaN(r)&&r>0;c&&(r=a=s?r:1,s=!0);const m=n.findIndex((e=>e.rowSystemId===l));r!==parseFloat(n[m].quantity)&&(w[t]&&w[t].abort(),D&&D.cancel(),s&&D(t,a,e));const i=[...n];i[m]={...i[m],quantity:a},o(i)}),[e,n]),u=(0,l.useCallback)((({order:e})=>l.createElement("img",{className:"checkout-cart__image",src:e.image,alt:e.name})),[]),h=(0,l.useCallback)((({order:e})=>l.createElement(l.Fragment,null,l.createElement("a",{href:e.url},e.name),l.createElement("span",{className:"checkout-cart__brand-name"},e.brand))),[]),v=(0,l.useCallback)((({order:e})=>l.createElement(l.Fragment,null,e.isFreeGift?e.campaignPrice:e.price)),[]),y=(0,l.useCallback)((e=>l.createElement(l.Fragment,null,e.isFreeGift?l.createElement("div",null,e.quantity):l.createElement("input",{className:"checkout-cart__input",type:"number",min:"1",maxLength:3,value:e.quantity.toString(),onChange:t=>d(e.articleNumber,t.target.value,e.rowSystemId,!1),onBlur:t=>d(e.articleNumber,t.target.value,e.rowSystemId)}))),[d]),E=({order:e})=>l.createElement(l.Fragment,null,e.isFreeGift?e.totalCampaignPrice:e.totalPrice),k=(0,l.useCallback)((({order:e})=>l.createElement(l.Fragment,null,!e.isFreeGift&&!t[e.rowSystemId]&&l.createElement("a",{className:"table__icon table__icon--delete",onClick:()=>a({...t,[e.rowSystemId]:!0}),title:(0,C.I)("general.remove")}),!e.isFreeGift&&t[e.rowSystemId]&&l.createElement(l.Fragment,null,l.createElement("a",{className:"table__icon table__icon--accept",onClick:()=>i(e.articleNumber),title:(0,C.I)("general.ok")}),l.createElement("a",{className:"table__icon table__icon--cancel",onClick:()=>a({...t,[e.rowSystemId]:!1}),title:(0,C.I)("general.cancel")})))),[i,t]),_=(0,l.useCallback)((({cart:e})=>l.createElement("h3",{className:"text--right"},(0,C.I)("checkout.cart.total"),": ",e.orderTotal)),[]);return l.createElement("div",{className:"row checkout__container"},l.createElement("div",{className:"small-12 simple-table hide-for-small-only"},l.createElement("div",{className:"row small-unstack no-margin"},l.createElement("div",{className:"columns small-12 medium-4 large-5"}),l.createElement("div",{className:"columns small-3 medium-2 large-2"},(0,C.I)("checkout.cart.header.price")),l.createElement("div",{className:"columns small-4 medium-2 large-2"},(0,C.I)("checkout.cart.header.quantity")),l.createElement("div",{className:"columns small-5 medium-3 large-3"},(0,C.I)("checkout.cart.header.total"))),n.map((e=>l.createElement("div",{className:"row small-unstack no-margin checkout-cart__row",key:e.rowSystemId},l.createElement("div",{className:"columns small-12 medium-4 large-5 checkout-cart__image-container"},l.createElement("div",{className:"checkout-cart__image-wrapper"},l.createElement(u,{order:e})),l.createElement("div",{className:"checkout-cart__image-info"},l.createElement(h,{order:e}))),l.createElement("div",{className:"columns small-3 medium-2 large-2 simple-table__cell--no-break-word"},l.createElement(v,{order:e})),l.createElement("div",{className:"columns small-2 medium-2 large-2"},y(e)),l.createElement("div",{className:"checkout-cart__total-price columns small-2 medium-3 large-2 simple-table__cell--no-break-word"},l.createElement(E,{order:e})),l.createElement("div",{className:"columns small-3 medium-1 large-1"},l.createElement(k,{order:e}))))),m.map((e=>l.createElement("div",{className:"row small-unstack no-margin checkout-cart__row",key:e.rowSystemId},l.createElement("div",{className:"columns small-12 medium-4 large-5 checkout-cart__image-container"},l.createElement("div",{className:"checkout-cart__discount-info checkout-cart__discount-row"},l.createElement(h,{order:e}))),l.createElement("div",{className:"columns small-3 medium-2 large-2 simple-table__cell--no-break-word"}),l.createElement("div",{className:"columns small-2 medium-2 large-2"}),l.createElement("div",{className:"checkout-cart__discount-price columns small-2 medium-3 large-2 simple-table__cell--no-break-word"},l.createElement(E,{order:e})),l.createElement("div",{className:"columns small-3 medium-1 large-1"})))),l.createElement("div",{className:"row small-unstack no-margin checkout-cart__row"},l.createElement("div",{className:"columns"},l.createElement(_,{cart:r})))),l.createElement("div",{className:"small-12 simple-table checkout-mobile show-for-small-only"},n.map((e=>l.createElement("div",{className:"row no-margin",key:e.rowSystemId},l.createElement("div",{className:"columns small-3"},l.createElement(u,{order:e})),l.createElement("div",{className:"columns small-9"},l.createElement("div",{className:"row"},l.createElement("div",{className:"small-8 columns"},l.createElement("div",{className:"flex-container flex-dir-column align-center"},l.createElement(h,{order:e}))),l.createElement("div",{className:"small-4 columns flex-container align-right"},l.createElement(k,{order:e}))),l.createElement("div",{className:"row"},l.createElement("div",{className:"small-12 columns flex-container align-justify"},l.createElement("div",null,l.createElement(v,{order:e})),l.createElement("div",null,y(e)))),l.createElement("div",{className:"row"},l.createElement("div",{className:"checkout-cart__total-price small-12 columns text--right"},l.createElement(E,{order:e}))))))),m.map((e=>l.createElement("div",{className:"row no-margin",key:e.rowSystemId},l.createElement("div",{className:"columns"},l.createElement("div",{className:"checkout-cart__discount-row"},l.createElement(h,{order:e})),l.createElement("div",{className:"checkout-cart__discount-price text--right"},l.createElement(E,{order:e})))))),l.createElement("div",{className:"row no-margin"},l.createElement("div",{className:"columns"},l.createElement(_,{cart:r})))))},x=({errors:e})=>l.createElement(l.Fragment,null,l.createElement("div",{className:"row"},l.createElement("div",{className:"small-12"},l.createElement("h2",{className:"checkout__title"},(0,C.I)("checkout.title")))),l.createElement("div",{className:"row"},l.createElement("h3",{className:"checkout__section-title"},(0,C.I)("checkout.cart.title"))),l.createElement("div",{className:"row"},e&&e.cart&&l.createElement("p",{className:"checkout__validator--error"},e.cart[0])),l.createElement(A,null)),q=({cssClass:e,name:t,id:a,autoComplete:c=null,placeholder:r=null,type:s="text",maxLength:n=200,disabled:o,onChange:m,value:i,label:d,errors:u})=>l.createElement("div",{className:e},l.createElement("label",{className:"form__label",htmlFor:a},d),l.createElement("input",{className:"form__input",disabled:o,id:a,name:t,type:s,value:i,placeholder:r,autoComplete:c,onChange:e=>m(e.target.value),maxLength:n}),u[a]&&l.createElement("span",{className:"form__validator--error form__validator--top-narrow","data-error-for":a},u[a][0]));const M=function({values:e}){return l.createElement("div",{className:"small-12 medium-12 columns"},e.map(((e,t)=>l.createElement(l.Fragment,null,l.createElement("span",{key:t},e),"Â "))))},F=e=>{const t=o.ZP.countries?o.ZP.countries.find((t=>t.value===e.country)):null;return t?t.text:e.country},P=({onChange:e,onSave:t,onCompanyAddressChange:a,valueForm:r,isEditingAddress:s})=>{const{payload:n,errors:o={}}=(0,c.v9)((e=>e.checkout)),{companyAddresses:m=[],companyName:i,authenticated:d}=n,u=(t,a,c,s="on",n="text")=>l.createElement(q,{cssClass:t,id:`${a}-${c}`,name:`${a}-${c}`,autoComplete:s,disabled:!d,value:(r[a]||{})[c]||"",onChange:t=>e(a,c,t),label:(0,C.I)(`checkout.customerinfo.${c.toLowerCase()}`),errors:o,type:n}),h=(0,l.useMemo)((()=>r.selectedCompanyAddressId&&m?m.find((e=>e.systemId===r.selectedCompanyAddressId)):null),[r.selectedCompanyAddressId,m]);return l.createElement("div",{className:"row checkout-info__container"},s?l.createElement(l.Fragment,null,l.createElement("div",{className:"small-12 medium-6 columns"},l.createElement("div",{className:"row-inner"},u("small-6 columns","customerDetails","firstName","billing given-name"),u("small-6 columns","customerDetails","lastName","billing family-name")),l.createElement("div",{className:"row-inner"},u("small-12 columns","customerDetails","phoneNumber","billing tel","tel")),l.createElement("div",{className:"row-inner"},u("small-12 columns","customerDetails","email","email","email"))),l.createElement("div",{className:"small-12 medium-6 columns"},l.createElement("div",{className:"row-inner"},l.createElement("div",{className:"small-12 columns"},l.createElement("label",{className:"form__label",htmlFor:"address"},(0,C.I)("checkout.customerinfo.address")),l.createElement("select",{className:"form__input",value:r.selectedCompanyAddressId||"",disabled:!d,onChange:e=>a(e.target.value,m.find((t=>t.systemId===e.target.value)).country)},l.createElement("option",{value:"",disabled:!0},(0,C.I)("checkout.customerinfo.companyaddress.placeholder")),m&&m.map((e=>l.createElement("option",{value:e.systemId,key:`companyAddress-${e.systemId}`},`${e.address}, ${e.zipCode}, ${e.city}, ${F(e)}`)))),o.selectedCompanyAddressId&&l.createElement("span",{className:"form__validator--error form__validator--top-narrow","data-error-for":"selectedCompanyAddressId"},o.selectedCompanyAddressId[0]))),h&&l.createElement("div",{className:"row-inner"},l.createElement("div",{className:"small-12 columns"},i),l.createElement("div",{className:"small-12 columns"},h.address),l.createElement("div",{className:"small-12 columns"},l.createElement("span",null,h.zipCode),"Â ",l.createElement("span",null,h.city)),l.createElement("div",{className:"small-12 columns"},F(h)))),l.createElement("div",{className:"small-12 columns flex-container align-right"},l.createElement(b,{onClick:t,title:(0,C.I)("checkout.continue"),rounded:!0}))):l.createElement(l.Fragment,null,l.createElement(M,{values:[r.customerDetails.firstName,r.customerDetails.lastName]}),l.createElement(M,{values:[i]}),l.createElement(M,{values:[h.address]}),l.createElement(M,{values:[h.zipCode,h.city]}),l.createElement(M,{values:[F(h)]}),l.createElement(M,{values:[r.customerDetails.phoneNumber]}),l.createElement(M,{values:[r.customerDetails.email]})))},S=({onChange:e,onSave:t,valueForm:a,isEditingAddress:r,signUpCheckboxVisibility:s})=>{const n=(0,c.I0)(),{payload:m,errors:i={}}=(0,c.v9)((e=>e.checkout)),{authenticated:d,signUp:u,isValidating:h}=m,{customerDetails:p={},alternativeAddress:v={}}=a,y=(t,c,r,s="on",n=null,o="text",m=200)=>l.createElement(q,{cssClass:t,id:`${c}-${r}`,name:`${c}-${r}`,autoComplete:s,value:(a[c]||{})[r]||"",onChange:t=>e(c,r,t),label:(0,C.I)(`checkout.customerinfo.${r.toLowerCase()}`),errors:i,placeholder:n,type:o,maxLength:m});return l.createElement("div",{className:"row checkout-info__container"},r?l.createElement(l.Fragment,null,l.createElement("div",{className:"small-12 medium-6 columns"},l.createElement("div",{className:"row-inner"},l.createElement("div",{className:"small-12 columns checkout-info__placeholder-container"})),l.createElement("div",{className:"row-inner"},y("small-6 columns","customerDetails","firstName","billing given-name"),y("small-6 columns","customerDetails","lastName","billing family-name"),y("small-12 columns","customerDetails","careOf","on",null,"text",100),y("small-12 columns","customerDetails","address","billing street-address"),y("small-6 columns","customerDetails","zipCode","billing postal-code",null,"text",50),y("small-6 columns","customerDetails","city","billing address-level2",null,"text",100),l.createElement("div",{className:"small-12 columns"},l.createElement("label",{className:"form__label",htmlFor:"country"},(0,C.I)("checkout.customerinfo.country")),l.createElement("select",{className:"form__input",id:"country",value:p.country,autoComplete:"country",onChange:t=>{e("alternativeAddress","country",t.target.value),e("customerDetails","country",t.target.value)}},l.createElement("option",{value:"",disabled:!0},(0,C.I)("checkout.customerinfo.country.placeholder")),o.ZP.countries&&o.ZP.countries.map((({text:e,value:t})=>l.createElement("option",{value:t,key:`country-${t}`},e))))),y("small-12 columns","customerDetails","phoneNumber","billing tel",null,"tel"))),l.createElement("div",{className:"small-12 medium-6 columns"},l.createElement("div",{className:"row-inner"},l.createElement("div",{className:"small-12 columns"},l.createElement("input",{className:"checkout-info__checkbox-input",type:"checkbox",id:"showAlternativeAddress",name:"showAlternativeAddress",checked:v.showAlternativeAddress||!1,onChange:t=>{var a;e("alternativeAddress","showAlternativeAddress",t.target.checked),n((a=t.target.checked,{type:o.mR,payload:{showAlternativeAddress:a}}))}}),l.createElement("label",{className:"checkout-info__checkbox-label",htmlFor:"showAlternativeAddress"},(0,C.I)("checkout.customerinfo.showAlternativeAddress")))),v.showAlternativeAddress&&l.createElement("div",{className:"row-inner"},y("small-6 columns","alternativeAddress","firstName","shipping given-name"),y("small-6 columns","alternativeAddress","lastName","shipping family-name"),y("small-12 columns","alternativeAddress","careOf","on",null,"text",100),y("small-12 columns","alternativeAddress","address","shipping street-address"),y("small-6 columns","alternativeAddress","zipCode","shipping postal-code",null,"text",50),y("small-6 columns","alternativeAddress","city","shipping address-level2",null,"text",100),l.createElement("div",{className:"small-12 columns"},l.createElement("label",{className:"form__label",htmlFor:"country2"},(0,C.I)("checkout.customerinfo.country")),l.createElement("select",{className:"form__input",id:"country2",value:v.country,autoComplete:"country",onChange:t=>{e("alternativeAddress","country",t.target.value),e("customerDetails","country",t.target.value)}},l.createElement("option",{value:"",disabled:!0},(0,C.I)("checkout.customerinfo.country.placeholder")),o.ZP.countries&&o.ZP.countries.map((({text:e,value:t})=>l.createElement("option",{value:t,key:`country2-${t}`},e))))),y("small-12 columns","alternativeAddress","phoneNumber","shipping tel",null,"tel"))),l.createElement("div",{className:"small-12 medium-6 columns"},l.createElement("div",{className:"row-inner"},y("small-12 columns","customerDetails","email","email",null,"email"))),l.createElement("div",{className:"small-12 columns flex-container "+(d?"align-right":"align-justify")},l.createElement("div",null,!d&&s&&l.createElement(l.Fragment,null,l.createElement("input",{className:"checkout-info__checkbox-input",type:"checkbox",id:"signupandlogin",checked:u,onChange:e=>n((e=>({type:o.h_,payload:{signUp:e}}))(e.target.checked))}),l.createElement("label",{className:"checkout-info__checkbox-label",htmlFor:"signupandlogin"},(0,C.I)("checkout.customerinfo.signupandlogin")))),l.createElement(b,{onClick:t,title:(0,C.I)("checkout.continue"),rounded:!0,disabled:h}))):l.createElement(l.Fragment,null,l.createElement(M,{values:[a.customerDetails.firstName,a.customerDetails.lastName]}),a.customerDetails.careOf&&l.createElement(M,{values:[a.customerDetails.careOf]}),l.createElement(M,{values:[a.customerDetails.address]}),l.createElement(M,{values:[a.customerDetails.zipCode,a.customerDetails.city]}),l.createElement(M,{values:[F(p)]}),l.createElement(M,{values:[a.customerDetails.phoneNumber]}),l.createElement(M,{values:[a.customerDetails.email]})))};var O=a(2479);const Z=(0,O.Ry)().shape({acceptTermsOfCondition:(0,O.O7)().required((0,C.I)("validation.checkrequired")).oneOf([!0],(0,C.I)("validation.checkrequired")),selectedDeliveryMethod:(0,O.Ry)().required((0,C.I)("validation.required")),selectedPaymentMethod:(0,O.Ry)().required((0,C.I)("validation.required"))}),T=(0,O.Ry)().shape({email:(0,O.Z_)().required((0,C.I)("validation.required")).email((0,C.I)("validation.email")),phoneNumber:(0,O.Z_)().required((0,C.I)("validation.required")),country:(0,O.nK)().required((0,C.I)("validation.required")).notOneOf([""],(0,C.I)("validation.required")),city:(0,O.Z_)().required((0,C.I)("validation.required")),zipCode:(0,O.Z_)().required((0,C.I)("validation.required")),address:(0,O.Z_)().required((0,C.I)("validation.required")),lastName:(0,O.Z_)().required((0,C.I)("validation.required")),firstName:(0,O.Z_)().required((0,C.I)("validation.required"))}),z=(0,O.Ry)().shape({phoneNumber:(0,O.Z_)().required((0,C.I)("validation.required")),country:(0,O.nK)().required((0,C.I)("validation.required")).notOneOf([""],(0,C.I)("validation.required")),city:(0,O.Z_)().required((0,C.I)("validation.required")),zipCode:(0,O.Z_)().required((0,C.I)("validation.required")),address:(0,O.Z_)().required((0,C.I)("validation.required")),lastName:(0,O.Z_)().required((0,C.I)("validation.required")),firstName:(0,O.Z_)().required((0,C.I)("validation.required"))}),$=(0,O.Ry)().shape({email:(0,O.Z_)().required((0,C.I)("validation.required")).email((0,C.I)("validation.email")),phoneNumber:(0,O.Z_)().required((0,C.I)("validation.required")),lastName:(0,O.Z_)().required((0,C.I)("validation.required")),firstName:(0,O.Z_)().required((0,C.I)("validation.required")),selectedCompanyAddressId:(0,O.Z_)().required((0,C.I)("validation.required"))}),j=(0,O.Ry)().shape({acceptTermsOfCondition:(0,O.O7)().required((0,C.I)("validation.checkrequired")).oneOf([!0],(0,C.I)("validation.checkrequired")),selectedDeliveryMethod:(0,O.Ry)().required((0,C.I)("validation.required")),selectedPaymentMethod:(0,O.Ry)().required((0,C.I)("validation.required"))}),R=e=>e&&e.showAlternativeAddress&&(e.firstName||e.lastName||e.address||e.zipCode||e.city||e.phoneNumber),V=(e,t)=>{const{customerDetails:a,selectedCompanyAddressId:l,alternativeAddress:c}=e;return t?$.validate({...a,selectedCompanyAddressId:l}):T.validate({...a}).then((e=>R(c)?z.validate({...c}).catch((e=>{throw e.addressPath="alternativeAddress",e})):e))},K=({checkout:e,addressFormValue:t,setAddressFormValue:a,isEditingAddress:s,setIsEditingAddress:n,signUpCheckboxVisibility:d})=>{const h=(0,c.I0)(),{payload:{loginUrl:p,authenticated:v,isBusinessCustomer:y,checkoutMode:E}}=e,k=(0,l.useCallback)(((e,t,l)=>{a((a=>({...a,[e]:{...a[e],[t]:l}})))}),[a]),_=(0,l.useCallback)(((e,t)=>{a((a=>({...a,selectedCompanyAddressId:e,customerDetails:{...a.customerDetails,country:t}})))}),[a]),I=(0,l.useCallback)((()=>{n(!0)}),[n]),w=(0,l.useCallback)((()=>{const a=["selectedCompanyAddressId"];h(f(!0)),h({type:o.kl,payload:{errors:[]}}),V(t,y).then((()=>{return h((e=t,(t,a)=>{const{payload:l}=a().checkout,c={...l,...e};return(0,r.gz)("api/checkout/setCustomerDetail",c).then((e=>e.json())).then((()=>t(g(!0)))).catch((e=>{throw e.response?e.response.json().then((e=>{t(N(e)),t(g(!1))})):t(N(e)),e}))}));var e})).then((()=>{const{payload:a}=e,{isBusinessCustomer:l}=a,{customerDetails:c,selectedCompanyAddressId:r,alternativeAddress:s}=t;if(h(i("customerDetails",c)),l){h((e=>({type:o.Ln,payload:{selectedCompanyAddressId:e}}))(r));const e=a.companyAddresses.find((e=>e.systemId===r));h(u(e.country))}else h(i("alternativeAddress",s)),h(u(c.country));n(!1)})).catch((e=>{e.path=a.indexOf(e.path)>=0?e.path:`${e?.addressPath||"customerDetails"}-${e.path}`,h(N(e))})).finally((()=>{h(f(!1))}))}),[h,t,y,e,n]),D=(0,l.useCallback)((()=>l.createElement(S,{onSave:w,onChange:k,valueForm:t,isEditingAddress:s,signUpCheckboxVisibility:d})),[t,s,k,w,d]),A=(0,l.useCallback)((()=>l.createElement(P,{onChange:k,onCompanyAddressChange:_,onSave:w,valueForm:t,isEditingAddress:s})),[t,s,_,k,w]);return v?l.createElement(l.Fragment,null,l.createElement("div",{className:"row align-justify"},l.createElement("h3",{className:"checkout__section-title"},(0,C.I)("checkout.customerinfo.title")),!s&&l.createElement(b,{onClick:I,title:"edit",isLink:!0})),!y&&D(),y&&A()):l.createElement(l.Fragment,null,l.createElement("div",{className:"row align-justify"},l.createElement("div",{className:"flex-container checkout__flex-wrapper"},l.createElement("h3",{className:"checkout__section-title"},(0,C.I)("checkout.customerinfo.title")),s&&l.createElement(l.Fragment,null,l.createElement("label",{className:"checkout__text--in-line"},(0,C.I)("checkout.customerinfo.existingcustomer")),"Â ",l.createElement("a",{href:p,className:"checkout__link"},(0,C.I)("checkout.customerinfo.clicktologin")),"Â ",!y&&E===o.ZP.checkoutMode.both&&l.createElement("a",{onClick:()=>h(m(!0)),className:"checkout__link"},(0,C.I)("checkout.customerinfo.businesscustomer")),y&&E===o.ZP.checkoutMode.both&&l.createElement("a",{onClick:()=>h(m(!1)),className:"checkout__link"},(0,C.I)("checkout.customerinfo.privatecustomer")))),!s&&l.createElement(b,{onClick:I,title:(0,C.I)("checkout.edit"),isLink:!0})),!y&&E!==o.ZP.checkoutMode.companyCustomers&&D(),(y||E===o.ZP.checkoutMode.companyCustomers)&&A())},U=({errors:e})=>{const t=(0,c.I0)(),{deliveryMethods:a,selectedDeliveryMethod:r}=(0,c.v9)((e=>e.checkout.payload));return l.createElement(l.Fragment,null,l.createElement("div",{className:"row"},l.createElement("h3",{className:"checkout__section-title"},(0,C.I)("checkout.delivery.title"))),a&&a.length>0&&l.createElement("section",{className:"row checkout-info__container"},l.createElement("div",{className:"columns small-12"},a.map((e=>l.createElement("label",{className:"row no-margin",key:e.id},l.createElement("input",{type:"radio",name:"deliveryMethods",className:"checkout-info__checkbox-radio",value:e.id,checked:e.id===r?.id,onChange:()=>t(d(e))}),l.createElement("span",{className:"columns"},l.createElement("b",null," ",e.name," ")," -"," ",e.formattedPrice)))))),l.createElement("div",{className:"row"},e.selectedDeliveryMethod&&l.createElement("span",{className:"form__validator--error form__validator--top-narrow"},e.selectedDeliveryMethod[0])))},B=()=>{const e=(0,c.I0)(),{payload:t,errors:a={}}=(0,c.v9)((e=>e.checkout)),{usedDiscountCodes:o}=t,m=(0,l.useRef)(null);return(0,l.useEffect)((()=>{a&&!a.discountCode?.length&&(m.current.value="")}),[a]),l.createElement(l.Fragment,null,l.createElement("div",{className:"row"},l.createElement("h3",{className:"checkout__section-title"},(0,C.I)("checkout.discountcode"))),l.createElement("section",{className:"row checkout-info__container"},l.createElement("div",{className:"columns small-12"},l.createElement("div",{className:"row no-margin"},l.createElement("div",{className:"small-6 medium-4"},l.createElement("input",{ref:m,className:"form__input",id:"campaign-code",placeholder:(0,C.I)("checkout.discountcode"),onChange:t=>e(y(t.target.value))}),a&&a.discountCode&&l.createElement("span",{className:"form__validator--error form__validator--top-narrow","data-error-for":"campaign-code"},a.discountCode[0])),l.createElement("div",{className:"small-5 medium-4 columns"},l.createElement("button",{className:"checkout-info__campaign-button",onClick:()=>e(((e,t)=>{const{payload:a}=t().checkout;return(0,r.gz)("/api/checkout/setDiscountCode",a).then((e=>e.json())).then((t=>{e(E(t.usedDiscountCodes)),e((0,s.zD)()),e(v(t.paymentWidget)),e(N({modelState:{discountCode:[]}}))})).catch((t=>{e((0,n.K)(t,(e=>N(e)))),e((0,s.zD)())}))}))},(0,C.I)("checkout.usediscountcode")))),l.createElement("div",{className:"row no-margin"},l.createElement("div",{className:"chip__container"},o&&o.map((t=>l.createElement("div",{className:"chip",key:t},l.createElement("span",{className:"chip__label checkout-discount-codes"},t),l.createElement("i",{className:"chip__icon chip__icon--check"}),l.createElement("i",{className:"chip__icon chip__icon--delete",onClick:()=>e((e=>(t,a)=>{const{payload:l}=a().checkout;return l.discountCode=e,(0,r.Od)("/api/checkout/deleteDiscountCode",l).then((e=>e.json())).then((e=>{t(E(e.usedDiscountCodes)),t((0,s.zD)()),t(v(e.paymentWidget)),t(y("")),t(N({modelState:{discountCode:[]}}))})).catch((e=>{t((0,n.K)(e,(e=>N(e)))),t((0,s.zD)())}))})(t)),title:(0,C.I)("general.remove")})))))))))},W=()=>{const e=(0,c.v9)((e=>e.cart));return l.createElement("div",{className:"columns small-12 medium-6 checkout-info__summary--full-row"},l.createElement("div",null,(0,C.I)("checkout.order.productstotal")," ",l.createElement("span",{className:"checkout-info__summary--expand"})," ",e.orderTotal),l.createElement("div",null,(0,C.I)("checkout.order.discount")," ",l.createElement("span",{className:"checkout-info__summary--expand"})," ",e.discount),l.createElement("div",null,(0,C.I)("checkout.order.deliverycost")," ",l.createElement("span",{className:"checkout-info__summary--expand"})," ",e.deliveryCost),l.createElement("div",null,(0,C.I)("checkout.order.paymentcost")," ",l.createElement("span",{className:"checkout-info__summary--expand"})," ",e.paymentCost),l.createElement("h3",null,(0,C.I)("checkout.order.grandTotal")," ",l.createElement("span",{className:"checkout-info__summary--expand"})," ",e.grandTotal),l.createElement("div",null,(0,C.I)("checkout.order.vat")," ",l.createElement("span",{className:"checkout-info__summary--expand"})," ",e.vat))},L=()=>{const e=(0,c.I0)(),t=(0,c.v9)((e=>e.checkout.payload.orderNote));return l.createElement("div",{className:"columns small-12 medium-6 checkout-info__summary--full-height"},(0,C.I)("checkout.order.message"),l.createElement("textarea",{className:"form__input checkout-info__messages",value:t,onChange:t=>e((e=>({type:o.Jp,payload:{orderNote:e}}))(t.target.value))}))},G=({errors:e})=>{const t=(0,c.I0)(),{payload:a}=(0,c.v9)((e=>e.checkout)),{paymentMethods:r,selectedPaymentMethod:s}=a;return l.createElement(l.Fragment,null,l.createElement("div",{className:"row"},l.createElement("h3",{className:"checkout__section-title"},(0,C.I)("checkout.payment.title"))),r&&r.length>0&&l.createElement("section",{className:"row checkout-info__container"},l.createElement("div",{className:"columns small-12"},r.map((e=>l.createElement("label",{className:"row no-margin",key:e.id},l.createElement("input",{type:"radio",name:"paymentMethods",className:"checkout-info__checkbox-radio",value:e.id,checked:e.id===s.id,onChange:()=>t(h(e))}),l.createElement("span",{className:"columns"},l.createElement("b",null," ",e.name," ")," -"," ",e.formattedPrice)))))),l.createElement("div",{className:"row"},e.selectedPaymentMethod&&l.createElement("span",{className:"form__validator--error form__validator--top-narrow"},e.selectedPaymentMethod[0])))};var J=a(6896);const Q=/<script\b[^>]*>([\s\S]*?)<\/script>/gi,Y=/<script.*?src=["'](.*?)["']/gi,H=e=>{let t,a=e;const l=[],c=[];for(;null!==(t=Q.exec(e));)a=a.replace(t[0],""),t[1]&&""!==t[1].trim()&&l.push(t[1]);for(;null!==(t=Y.exec(e));)t[1]&&""!==t[1].trim()&&c.push(t[1]);return{html:a,scripts:l,scriptFiles:c}},X=(e,t)=>{const a=document.createElement("script");a.type="text/javascript";try{a.appendChild(document.createTextNode(t))}catch(e){a.text=t}document.getElementById(e).appendChild(a)},ee=(e,t)=>{const a=document.createElement("script");a.type="text/javascript",a.src=t,document.getElementById(e).appendChild(a)},te=l.memo((function({responseString:e}){return(e=>{const t=(0,J.Z)({loader:()=>a.e(652).then(a.bind(a,2652))}),c={paymentSession:e,extractScripts:H,executeScript:X,includeScript:ee};return l.createElement(t,c)})(e)})),ae=()=>{const e=(0,c.I0)(),t=(0,c.v9)((e=>e.cart)),a=(0,c.v9)((e=>e.checkout)),[r,s]=(0,l.useState)(!0),[n,m]=(0,l.useState)(!0),[i,u]=(0,l.useState)(!0),[p,v]=(0,l.useState)(!0),[y,E]=(0,l.useState)(!0),[f,I]=(0,l.useState)(!0),[w,D]=(0,l.useState)(!0),{payload:{customerDetails:A,alternativeAddress:q,selectedCompanyAddressId:M,selectedDeliveryMethod:F,selectedPaymentMethod:P,deliveryMethods:S,paymentMethods:O}}=a,[J,Q]=(0,l.useState)(!0),[Y,H]=(0,l.useState)({customerDetails:A,alternativeAddress:q,selectedCompanyAddressId:M}),X=(0,l.useCallback)((()=>e(((e,t)=>{const{payload:a}=t().checkout;return k("/api/checkout",a,e)}))),[e]),ee=(0,l.useCallback)((t=>{e(N(t)),e(_(null))}),[e]),ae=(0,l.useCallback)((()=>{const{payload:t}=a,{isBusinessCustomer:l,selectedCompanyAddressId:c,acceptTermsOfCondition:r,selectedPaymentMethod:s,selectedDeliveryMethod:n}=t,o=["selectedCompanyAddressId","selectedPaymentMethod","selectedDeliveryMethod","acceptTermsOfCondition"],m=(t,a="customerDetails")=>{t.path=o.indexOf(t.path)>=0?t.path:`${a}-${t.path}`,ee(t),e(g(!0))};e(g(!1)),l?$.validate({...t.customerDetails,selectedCompanyAddressId:c}).then((()=>{j.validate({selectedPaymentMethod:s,selectedDeliveryMethod:n,acceptTermsOfCondition:r}).then((()=>{X()})).catch(m)})).catch(m):T.validate({...t.customerDetails}).then((()=>{R(t.alternativeAddress)?z.validate({...t.alternativeAddress}).then((()=>{Z.validate({selectedPaymentMethod:s,selectedDeliveryMethod:n,acceptTermsOfCondition:r}).then((()=>{X()})).catch(m)})).catch((e=>{m(e,"alternativeAddress")})):Z.validate({selectedPaymentMethod:s,selectedDeliveryMethod:n,acceptTermsOfCondition:r}).then((()=>{X()})).catch(m)})).catch(m)}),[a,e,X,ee]),le=(0,l.useCallback)((()=>{s(!0),m(!0),u(!0),v(!0),E(!0),I(!0),D(!0)}),[]),ce=(0,l.useCallback)((e=>S.find((t=>t.integrationType===e))),[S]),re=(0,l.useRef)(!0);if((0,l.useEffect)((()=>{if(!re.current)return;if(re.current=!1,!a)return;const{selectedPaymentMethod:t,selectedDeliveryMethod:l,customerDetails:c,alternativeAddress:r}=a.payload;t&&e(h(t)),l&&e(d(l)),H((e=>({...e,customerDetails:{...c??{},country:c?.country??o.ZP.countries[0].value},alternativeAddress:{...r??{},country:r?.country??o.ZP.countries[0].value}})))}),[a,e]),(0,l.useEffect)((()=>{switch(le(),P?.integrationType){case o.yb.IframeCheckout:u(!1),I(!1);break;case o.yb.PaymentWidgets:J&&E(!1),I(!1),D(!1);break;case o.yb.DirectPayment:J&&I(!1),E(!1)}return ce(o.Kb.DeliveryCheckout)?s(!1):ce(o.Kb.PaymentCheckout)?s(!1)&&v(!1):void(F?.integrationType===o.Kb.Inline&&v(!1))}),[F,P,S,O,le,ce,J]),(0,l.useEffect)((()=>{e(g(!1)),J||V(Y,a.payload.isBusinessCustomer).then((()=>{e(g(!0))})).catch((()=>{e(g(!1))}))}),[e,J,Y,a.payload.isBusinessCustomer]),(0,l.useEffect)((()=>{if(a.result&&a.result.redirectUrl)return void(window.location=a.result.redirectUrl);if(!a.errors)return;const e=Object.keys(a.errors);if(!e||e.length<1)return;const t=document.querySelector(`[data-error-for="${e[0]}"]`);if(!t)return;const l=t.parentElement.querySelector("input");l?(setTimeout((()=>l.focus()),1e3),l.scrollIntoView({behavior:"smooth"})):t.scrollIntoView({behavior:"smooth"})}),[a.result,a.errors]),!t||!t.orderRows||t.orderRows.length<1)return l.createElement("div",{className:"row"},l.createElement("div",{className:"small-12"},l.createElement("h2",{className:"checkout__title"},(0,C.I)("checkout.cart.empty"))));const{payload:se,errors:ne={}}=a,{paymentWidget:oe,authenticated:me,isBusinessCustomer:ie,checkoutMode:de}=se,ue=oe?oe.responseString:null,he=oe?oe._force_update:null;return l.createElement(l.Fragment,null,l.createElement(x,{errors:ne}),l.createElement(B,null),r&&l.createElement(U,{errors:ne}),n&&l.createElement(G,{errors:ne}),i&&l.createElement(K,{checkout:a,addressFormValue:Y,isEditingAddress:J,setAddressFormValue:H,setIsEditingAddress:Q,signUpCheckboxVisibility:w}),oe&&y&&l.createElement(te,{key:he,responseString:ue}),f&&l.createElement(l.Fragment,null,l.createElement("div",{className:"row"},l.createElement("h3",{className:"checkout__section-title"},(0,C.I)("checkout.order.title"))),l.createElement("section",{className:"row checkout-info__container checkout-info__summary"},l.createElement(L,null),l.createElement(W,null)),l.createElement("div",{className:"row"},l.createElement("input",{className:"checkout-info__checkbox-input",type:"checkbox",id:"acceptTermsOfCondition",checked:se.acceptTermsOfCondition,onChange:t=>e((e=>({type:o.mF,payload:{acceptTermsOfCondition:e}}))(t.target.checked))}),l.createElement("label",{className:"checkout-info__checkbox-label",htmlFor:"acceptTermsOfCondition"},(0,C.I)("checkout.terms.acceptTermsOfCondition")," ",l.createElement("a",{className:"checkout__link",href:se.termsUrl,target:"_blank",rel:"noreferrer"},(0,C.I)("checkout.terms.link"))),ne.acceptTermsOfCondition&&l.createElement("span",{className:"form__validator--error form__validator--top-narrow","data-error-for":"acceptTermsOfCondition"},ne.acceptTermsOfCondition[0])),l.createElement("div",{className:"row checkout__submit"},me||!ie&&de!==o.ZP.checkoutMode.companyCustomers?l.createElement(b,{disabled:!a.enableConfirmButton,onClick:ae,title:(0,C.I)("checkout.placeorder"),fluid:!0,type:"submit"}):l.createElement(b,{onClick:()=>location.href=se.loginUrl,title:(0,C.I)("checkout.login.to.placeorder"),fluid:!0}))),l.createElement("div",{className:"row"},ne&&ne.general&&l.createElement("p",{className:"checkout__validator--error"},ne.general[0]),ne&&ne.payment&&l.createElement("p",{className:"checkout__validator--error"},ne.payment[0])))}}}]);
//# sourceMappingURL=644.911618676702ed01615e.js.map