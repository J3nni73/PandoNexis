{"version":3,"sources":["webpack:///./Scripts/_Addons/MediaCatalog/Actions/MediaCatalog.action.js","webpack:///./Scripts/_Addons/MediaCatalog/Components/Breadcrumbs.js","webpack:///./Scripts/_Addons/MediaCatalog/Components/GridView.js","webpack:///./Scripts/_Addons/MediaCatalog/Components/ListView.js","webpack:///./Scripts/_Addons/MediaCatalog/Components/Search.js","webpack:///./Scripts/_Addons/MediaCatalog/Icons/folder_fill.svg","webpack:///./Scripts/_Addons/MediaCatalog/Icons/folder_open_fill.svg","webpack:///./Scripts/_Addons/MediaCatalog/Components/MediaCatalogContainer.js"],"names":["loadError","error","dispatch","getState","toggleGenericLoader","type","MEDIA_CATALOG_LOAD","payload","fillMediaStructure","response","fileStructure","currentStructure","breadcrumbClick","className","length","map","folder","breadcrumbIndex","key","onClick","folderName","currentFolder","allowedImageExtensions","formatFileSize","files","translate","file","indexFile","href","downloadUrl","extension","Fragment","findIndex","x","toLowerCase","src","largeThumbnailUrl","alt","name","loading","frameWidth","frameHeight","fileSize","mediumThumbnailUrl","filterItems","searchRef","useRef","searchQuery","setSearchQuery","useState","componentLoaded","setComponentLoaded","activeSearchQuery","setActiveSearchQuery","search","useEffect","current","value","onChange","e","event","newValue","target","checkSearchQuery","onKeyPress","charCode","onKeyUp","ref","placeholder","_path","_extends","Object","assign","bind","i","arguments","source","prototype","hasOwnProperty","call","apply","this","props","xmlns","height","width","d","mediaFolderId","alternativeFolderName","useAltMediaView","useDispatch","setCurrentFolder","firstFolderName","setFirstFolderName","useAlternativeFolderView","setUseAlternativeFolderView","viewType","setViewType","setCurrentStructure","fuse","setFuse","useSelector","state","mediaCatalog","updateStructure","obj","folderIndexTo","folderData","slice","clearStructure","Math","floor","toString","formatNumber","numb","toFixed","replace","get","rootRoute","then","json","catch","ex","catchError","getMediaCatalogData","constructFlatFileArray","index","push","parentName","concat","filesArray","Fuse","keys","threshold","distance","trim","q","result","item","newStructure"],"mappings":"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","file":"431.922928e3ec3454916a4b.js","sourcesContent":["import { get, post } from '../../../Services/http';\r\nimport { getURLSearchParams } from '../../../_PandoNexis/Services/url';\r\nimport { catchError } from '../../../Actions/Error.action';\r\nimport { toggleGenericLoader } from '../../../_PandoNexis/Actions/GenericLoader.action';\r\n\r\nimport { MEDIA_CATALOG_LOAD, MEDIA_CATALOG_ERROR } from '../constants';\r\n\r\nconst rootRoute = '/api/mediacatalog/';\r\n\r\nexport const getMediaCatalogData = (mediaFolderId) => (dispatch, getState) => {\r\n\r\n    let pagenationActive = false;\r\n    dispatch(toggleGenericLoader(true));\r\n\r\n    return get(rootRoute + `getMediaData?folderId=` + mediaFolderId)\r\n        .then((response) => response.json())\r\n        .then((response) => dispatch(fillMediaStructure(response)))\r\n        .catch((ex) => dispatch(catchError(ex, (error) => loadError(error))));\r\n};\r\n\r\n\r\nexport const loadError = (error) => (dispatch, getState) => {\r\n    dispatch(toggleGenericLoader(false));\r\n    return dispatch({\r\n        type: MEDIA_CATALOG_LOAD,\r\n        payload: {\r\n            error,\r\n        },\r\n    });\r\n};\r\n\r\nexport const fillMediaStructure = (response) => (dispatch) =>{\r\n    dispatch(toggleGenericLoader(false));\r\n    return dispatch({\r\n        type: MEDIA_CATALOG_LOAD,\r\n        payload: {\r\n            fileStructure: response,\r\n        },\r\n    });\r\n};\r\n\r\n\r\nexport const clearRows = () => {\r\n    return {\r\n        type: MEDIA_CATALOG_LOAD,\r\n        payload: {\r\n            dataRows: [],\r\n        },\r\n    };\r\n};\r\n\r\nexport const updateAllRows = (rows) => {\r\n    return {\r\n        type: MEDIA_CATALOG_LOAD,\r\n        payload: {\r\n            dataRows: rows,\r\n        },\r\n    };\r\n};\r\n","import React from 'react';\r\n\r\nconst Breadcrumbs = ({\r\n    currentStructure,\r\n    breadcrumbClick\r\n}) => {\r\n    if (!currentStructure)\r\n        return null;\r\n\r\n    return (\r\n        <div className=\"media-catalog__breadcrumb\">\r\n            {currentStructure && currentStructure.length > 0 && currentStructure.map((folder, breadcrumbIndex) => {\r\n                return (\r\n                    <span key={`media-folder__breadcrumb${breadcrumbIndex}`} onClick={() => breadcrumbClick(folder)}>{folder.folderName}</span>\r\n                )\r\n            })}\r\n        </div>\r\n    )\r\n};\r\n\r\nexport default Breadcrumbs;","import React, { Fragment } from 'react';\r\nimport FadeIn from 'react-fade-in';\r\nimport { translate } from '../../../Services/translation';\r\n\r\nconst GridView = ({\r\n    currentFolder,\r\n    allowedImageExtensions,\r\n    formatFileSize\r\n}) => {\r\n    if (!currentFolder || !currentFolder.files || currentFolder.files.length < 1)\r\n        return null;\r\n    return (\r\n        <div className={`row media-catalog__files small-up-2 medium-up-4 large-up-6 align-center align-middle`}>\r\n            {!currentFolder.files || currentFolder.files.length < 1 &&\r\n                <span className=\"media-catalog__no-files\">{translate('addons.mediacatalog.nofilesfound')}</span>\r\n            }\r\n            {currentFolder && currentFolder.files && currentFolder.files.length > 0 && currentFolder.files.map((file, indexFile) => {\r\n                return (\r\n                    <FadeIn className={`column`} key={`media-catalog__folder-Grid${indexFile}`}>\r\n                        <div className=\"media-catalog__files-card\">\r\n                            <figure>\r\n                                <div className=\"pn-card\">\r\n                                    <a href={file.downloadUrl}>\r\n                                        {file.extension &&\r\n                                            <Fragment>\r\n                                                {file.extension &&\r\n                                                    <div className=\"media-catalog__files-tag-extension\"> {file.extension}</div>\r\n                                                }\r\n                                                {file && file.extension && allowedImageExtensions.findIndex(x => x === file.extension.toLowerCase()) !== -1 ?\r\n                                                    (<img src={file.largeThumbnailUrl} alt={file.name} loading=\"lazy\" />) :\r\n                                                    (<div className={`media-catalog__file media-catalog__file--${file.extension.toLowerCase()}`}></div>)\r\n                                                }\r\n                                            </Fragment>\r\n                                        }</a>\r\n                                </div>\r\n                                <figcaption>\r\n                                    <h4>{translate('addons.mediacatalog.info')}</h4>\r\n                                    <ul className=\"media-catalog__file-data\">\r\n                                        <li>{translate('addons.mediacatalog.fileinfo.name')}: <span>{file.name}</span></li>\r\n                                        <li>{translate('addons.mediacatalog.fileinfo.width')}: <span>{file.frameWidth}px</span></li>\r\n                                        <li>{translate('addons.mediacatalog.fileinfo.height')}: <span>{file.frameHeight}px</span></li>\r\n                                        <li>{translate('addons.mediacatalog.fileinfo.filesize')}: <span>{formatFileSize(file.fileSize)}</span></li>\r\n                                        <li>{translate('addons.mediacatalog.fileinfo.fileextension')}: <span>{file.extension}</span></li>\r\n                                    </ul>\r\n                                </figcaption>\r\n                            </figure>\r\n                        </div>\r\n                    </FadeIn>\r\n                )\r\n            }\r\n            )}\r\n        </div>\r\n    )\r\n};\r\n\r\nexport default GridView;\r\n\r\n","import React, { Fragment } from 'react';\r\nimport FadeIn from 'react-fade-in';\r\nimport { translate } from '../../../Services/translation';\r\n\r\nconst ListView = ({\r\n    currentFolder,\r\n    allowedImageExtensions,\r\n    formatFileSize\r\n}) => {\r\n    if (!currentFolder || !currentFolder.files || currentFolder.files.length < 1)\r\n        return (<span className=\"media-catalog__no-files\">{translate('addons.mediacatalog.nofilesfound')}</span>);\r\n    return (\r\n        <Fragment>\r\n            <div className=\"row media-catalog__table-header\">\r\n                <div className=\"small-12 medium-2 columns\">&nbsp;</div>\r\n                <div className=\"small-12 medium-4 columns\">Description</div>\r\n                <div className=\"small-12 medium-2 columns\">File size</div>\r\n                <div className=\"small-12 medium-2 columns\">File extension</div>\r\n                <div className=\"small-12 medium-2 columns\">&nbsp;</div>\r\n            </div>\r\n            <FadeIn className=\"media-catalog__table-data\">\r\n                {currentFolder && currentFolder.files && currentFolder.files.length > 0 && currentFolder.files.map((file, indexFile) => {\r\n                    return (\r\n                        <div className={`row media-catalog__table-row`} key={`media-catalog__folder${indexFile}`}>\r\n                            <div className=\"small-12 medium-2 columns media-catalog__table-image\">\r\n                                <figure>\r\n                                    {file && file.extension && allowedImageExtensions.findIndex(x => x === file.extension.toLowerCase()) !== -1 ?\r\n                                        (<img src={file.mediumThumbnailUrl} alt={file.name} loading=\"lazy\" />) :\r\n                                        (<div className={`media-catalog__file media-catalog__file--small media-catalog__file--${file.extension.toLowerCase()}`}></div>)\r\n                                    }\r\n                                </figure>\r\n                            </div>\r\n                            <div className=\"small-12 medium-4 columns media-catalog__table-decription\">\r\n                                <ul className=\"media-catalog__file-data\">\r\n                                    <li>{translate('addons.mediacatalog.fileinfo.name')}: <span>{file.name}</span></li>\r\n                                    <li>{translate('addons.mediacatalog.fileinfo.width')}: <span>{file.frameWidth}px</span></li>\r\n                                    <li>{translate('addons.mediacatalog.fileinfo.height')}: <span>{file.frameHeight}px</span></li>\r\n                                </ul>\r\n                            </div>\r\n                            <div className=\"small-12 medium-2 columns media-catalog__table-file-type\">{formatFileSize(file.fileSize)}</div>\r\n                            <div className=\"small-12 medium-2 columns media-catalog__table-file-size\">{file.extension.toLowerCase()}</div>\r\n                            <div className=\"small-12 medium-2 columns media-catalog__table-button text--right\"><a href={file.downloadUrl}>{translate('addons.mediacatalog.button.download')}</a></div>\r\n                        </div>\r\n                    )\r\n                }\r\n                )}\r\n            </FadeIn>\r\n        </Fragment>\r\n    )\r\n};\r\n\r\nexport default ListView;\r\n\r\n","import React, { Fragment, useEffect, useState, useRef } from 'react';\r\nimport { translate } from '../../../Services/translation';\r\n\r\nconst Search = ({ filterItems }) => {\r\n\r\n    const searchRef = useRef();\r\n    const [searchQuery, setSearchQuery] = useState('');\r\n    const [componentLoaded, setComponentLoaded] = useState(false);\r\n    const [activeSearchQuery, setActiveSearchQuery] = useState('');\r\n    const search = () => {\r\n        setActiveSearchQuery(searchQuery);\r\n        filterItems(searchQuery);\r\n    };\r\n    const onKeyUp = (event) => {\r\n        if (event.key === \"Enter\" || event.charCode === 13) {\r\n            search();\r\n        }\r\n    };\r\n\r\n    const checkSearchQuery = (event) => {\r\n        var newValue = event.target.value;\r\n        setSearchQuery(newValue);\r\n        if (!newValue || newValue.length < 1 && searchQuery) {\r\n            setSearchQuery('');\r\n            setActiveSearchQuery('');\r\n            return;\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (!activeSearchQuery || activeSearchQuery.length === '') {\r\n            if (componentLoaded) {\r\n                searchRef.current.value = '';\r\n                search();\r\n            }\r\n            setComponentLoaded(true);\r\n        }\r\n    }, [activeSearchQuery]);\r\n    return (\r\n        <Fragment>\r\n            <div className=\"media-catalog__search-filter-remove\">\r\n                {activeSearchQuery &&\r\n                    <div onClick={() => { setSearchQuery(''), setActiveSearchQuery('') }}>{translate('addons.mediacatalog.removeactivesearch')}: <i>{activeSearchQuery}</i></div>\r\n                }\r\n            </div>\r\n            <div className=\"media-catalog__search\">\r\n                <input type=\"search\" onChange={(e) => checkSearchQuery(e)} onKeyPress={(event) => onKeyUp(event)} ref={searchRef} placeholder={ translate('addons.mediacatalog.searchforfilestext') } />\r\n                <div className={`media-catalog__search-button ${!searchQuery ? 'media-catalog__search-button--disabled' : ''}`} onClick={(e) => search()}>{translate('addons.mediacatalog.button.search')}</div>\r\n\r\n                {/*false && currentStructure && currentStructure.length > 0 && currentStructure.map((folder, breadcrumbIndex) => {\r\n                return (\r\n                    <span key={`media-folder__breadcrumb${breadcrumbIndex}`} onClick={() => breadcrumbClick(folder)}>{folder.folderName}</span>\r\n                )\r\n            })*/}\r\n            </div>\r\n        </Fragment>\r\n    )\r\n};\r\n\r\nexport default Search;\r\n","var _path;\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport * as React from \"react\";\nconst SvgFolderFill = props => /*#__PURE__*/React.createElement(\"svg\", _extends({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  height: 48,\n  width: 48\n}, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M7.05 40q-1.2 0-2.1-.925-.9-.925-.9-2.075V11q0-1.15.9-2.075Q5.85 8 7.05 8h14l3 3h17q1.15 0 2.075.925.925.925.925 2.075v23q0 1.15-.925 2.075Q42.2 40 41.05 40Z\"\n})));\nexport default SvgFolderFill;","var _path;\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport * as React from \"react\";\nconst SvgFolderOpenFill = props => /*#__PURE__*/React.createElement(\"svg\", _extends({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  height: 48,\n  width: 48\n}, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M7 40q-1.15 0-2.075-.925Q4 38.15 4 37V11q0-1.15.925-2.075Q5.85 8 7 8h14.05l3 3H41q1.15 0 2.075.925Q44 12.85 44 14H7v23l5.1-20H47l-5.35 20.7q-.3 1.2-1.1 1.75T38.5 40Z\"\n})));\nexport default SvgFolderOpenFill;","import React, { useEffect, useState } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { getMediaCatalogData } from '../Actions/MediaCatalog.action';\r\nimport Fuse from 'fuse.js'\r\n\r\nimport { translate } from '../../../Services/translation';\r\n\r\nimport Breadcrumbs from './Breadcrumbs';\r\nimport GridView from './GridView';\r\nimport ListView from './ListView';\r\nimport Search from './Search';\r\nimport FolderIcon from '../Icons/folder_fill.svg?component';\r\nimport FolderOpenIcon from '../Icons/folder_open_fill.svg?component';\r\n\r\nconst MediaCatalogContainer = ({\r\n    mediaFolderId,\r\n    alternativeFolderName,\r\n    useAltMediaView\r\n}) => {\r\n    const dispatch = useDispatch();\r\n    const [currentFolder, setCurrentFolder] = useState({});\r\n    const [firstFolderName, setFirstFolderName] = useState(alternativeFolderName);\r\n    const [useAlternativeFolderView, setUseAlternativeFolderView] = useState(useAltMediaView);\r\n    const [viewType, setViewType] = useState('grid');\r\n    const [currentStructure, setCurrentStructure] = useState([]);\r\n    const [fuse, setFuse] = useState(null);\r\n\r\n    const { fileStructure } = useSelector(\r\n        (state) => state.mediaCatalog\r\n    );\r\n    const updateStructure = (folderName) => {\r\n        const obj = { folderName };\r\n        setCurrentStructure([...currentStructure, obj]);\r\n    };\r\n    const allowedImageExtensions = [\"jpg\", \"jpeg\", \"png\", \"gif\", \"webp\", \"svg\"];\r\n    const breadcrumbClick = (folder) => {\r\n        var folderIndexTo = currentStructure.findIndex(x => x.folderName == folder.folderName);\r\n        if (folderIndexTo === null || folderIndexTo === undefined || folderIndexTo < 0) {\r\n            return;\r\n        }\r\n        if (folderIndexTo === 0) {\r\n            setCurrentFolder(fileStructure);\r\n        }\r\n        else {\r\n            setCurrentFolder(fileStructure.folderData[folderIndexTo - 1]);\r\n        }\r\n\r\n        // Set breadcrumbs\r\n        setCurrentStructure(currentStructure.slice(0, folderIndexTo + 1));\r\n    };\r\n\r\n    const clearStructure = () => {\r\n        const obj = { folderName: firstFolderName || fileStructure.folderName };\r\n        setCurrentStructure([obj]);\r\n    };\r\n\r\n    const formatFileSize = (fileSize) => {\r\n        if (!fileSize)\r\n            return '';\r\n        const type = Math.floor((fileSize.toString().length - 1) / 3);\r\n        switch (type) {\r\n            case 0:\r\n            case 1:\r\n                return formatNumber(fileSize / 1000) + \"KB\";\r\n                break\r\n            case 2:\r\n                return formatNumber(fileSize / 1000000) + \"MB\";\r\n                break\r\n            case 3:\r\n                return formatNumber(fileSize / 1000000000) + \"TB\";\r\n                break;\r\n            default: break\r\n        }\r\n\r\n        return '';\r\n    }\r\n    const formatNumber = (numb) => {\r\n        return numb.toFixed(2).replace('.00', '');\r\n    };\r\n\r\n    const filterItems = (searchQuery) => {\r\n        clearStructure();\r\n        if (!searchQuery || searchQuery.trim().length === '') {\r\n            setCurrentFolder(fileStructure);\r\n            return;\r\n        }\r\n        if (fuse) {\r\n            const q = searchQuery.trim();\r\n            const result = fuse.search(q);\r\n            if (result) {\r\n                const files = result.map(e => e.item);\r\n                const newStructure = {\r\n                    folderName: firstFolderName || fileStructure.folderName,\r\n                    files\r\n                }\r\n                setCurrentFolder(newStructure);\r\n            }\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (mediaFolderId) {\r\n            dispatch(getMediaCatalogData(mediaFolderId));\r\n        }\r\n    }, []);\r\n\r\n    const constructFlatFileArray = (obj) => {\r\n        let files = [];\r\n        if (obj) {\r\n            if (obj.files) {\r\n                obj.files.map((file, index) => {\r\n                    files.push({ ...file, parentName: obj.parentName });\r\n                });\r\n            }\r\n\r\n            if (obj.folderData) {\r\n                obj.folderData.map((folder, index) => {\r\n                    files = files.concat(constructFlatFileArray(folder));\r\n                });\r\n            }\r\n        }\r\n        return files;\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (fileStructure) {\r\n            setCurrentFolder(fileStructure);\r\n\r\n            if (fileStructure.folderName) {\r\n                // Set Breadcrumbs - start-folder\r\n                clearStructure();\r\n            }\r\n\r\n            // Is this needed?\r\n            const filesArray = constructFlatFileArray(fileStructure);\r\n\r\n            // Fuzzy search\r\n            setFuse(new Fuse(filesArray, {\r\n                keys: [\r\n                    'name',\r\n                    'extension',\r\n                ],\r\n                threshold: 0.3,\r\n                distance: 10,\r\n            }));\r\n        }\r\n    }, [fileStructure]);\r\n    return (\r\n        <div className=\"media-catalog\">\r\n            <div className=\"row text--center media-catalog__header\">\r\n                <section className=\"small-12 columns\"><Search filterItems={filterItems} /></section>\r\n                <section className=\"small-12 columns\"><Breadcrumbs currentStructure={currentStructure} breadcrumbClick={breadcrumbClick} /></section>\r\n            </div>\r\n            {currentFolder.folderData &&\r\n                <div className=\"media-catalog__folder-data-container\">\r\n                    <div className={`row media-catalog__folder-data align-center ${useAlternativeFolderView ? 'small-up-2 medium-up-4 large-up-6' : ''}`}>\r\n                        {\r\n                            currentFolder.folderData && currentFolder.folderData.length > 0 && currentFolder.folderData.map((folder, index) => {\r\n                                if (!useAlternativeFolderView)\r\n                                    return (\r\n                                        <div className=\"column small-6 medium-1\" key={`media-folder__folder${index}`} onClick={() => { setCurrentFolder(folder), updateStructure(folder.folderName) }}>\r\n                                            <div className=\"media-catalog__icon-folder\">\r\n                                                <FolderIcon width=\"48\" height=\"48\" className=\"media-catalog__icon-folder-item media-catalog__icon-folder-item--closed\" alt={translate('addons.mediacatalog.button.folder')} />\r\n                                                <FolderOpenIcon width=\"48\" height=\"48\" className=\"media-catalog__icon-folder-item media-catalog__icon-folder-item--open\" alt={translate('addons.mediacatalog.button.folderopen')} />\r\n                                             </div>\r\n                                            <div className=\"media-catalog__icon-folder-text\">{folder.folderName}</div>\r\n                                        </div>\r\n                                    );\r\n                                return (\r\n                                    <div className=\"column\" key={`media-folder__folder${index}`}>\r\n                                        <div>\r\n                                            <div className={`pn-card`} onClick={() => { setCurrentFolder(folder), updateStructure(folder.folderName) }}>\r\n                                                <div className=\"media-catalog__folder-data-item\">\r\n                                                    {folder.folderName}\r\n                                                </div>\r\n                                                <div className=\"media-catalog__folder-text\">Folder</div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                );\r\n                            })\r\n                        }\r\n                    </div>\r\n                </div>\r\n            }\r\n            {fileStructure.files &&\r\n                <section className={`${viewType}-view`}>\r\n                    <div className=\"row\">\r\n                        <h2 className=\"column text--center media-catalog__folder-heading\">\r\n                            <div className=\"media-catalog__view-toggler\"><span className={`media-catalog__view-toggler-grid ${viewType === 'grid' ? 'media-catalog__view-toggler-grid--active' : ''}`} onClick={() => setViewType('grid')}></span><span className={`media-catalog__view-toggler-list ${viewType === 'list' ? 'media-catalog__view-toggler-list--active' : ''}`} onClick={() => setViewType('list')}></span></div>\r\n                            {\r\n                                currentStructure && currentStructure.length > 1 &&\r\n                                <span className=\"media-catalog__folder-back-link\" onClick={() => breadcrumbClick(currentStructure[currentStructure.length - 2])}>{translate('addons.mediacatalog.button.stepoutoffolder')}</span>\r\n                            }\r\n                            Files in folder: <span>{currentStructure.length === 1 ? (firstFolderName || fileStructure.folderName) : currentFolder.folderName}</span></h2></div>\r\n\r\n                    {viewType === 'list' ?\r\n                        (<ListView currentFolder={currentFolder} allowedImageExtensions={allowedImageExtensions} formatFileSize={formatFileSize} />)\r\n                        :\r\n                        (<GridView currentFolder={currentFolder} allowedImageExtensions={allowedImageExtensions} formatFileSize={formatFileSize} />)\r\n                    }\r\n                </section>\r\n            }\r\n        </div>\r\n    );\r\n};\r\nexport default MediaCatalogContainer;\r\n"],"sourceRoot":""}