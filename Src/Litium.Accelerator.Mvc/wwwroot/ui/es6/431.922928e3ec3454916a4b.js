(self.webpackChunk=self.webpackChunk||[]).push([[431],{8431:(e,a,l)=>{"use strict";l.r(a),l.d(a,{default:()=>k});var t=l(7378),n=l(8036),i=l(5319),m=l(8997),c=l(4938),r=l(5515);const s=e=>(a,l)=>(a((0,c.N)(!1)),a({type:r.k,payload:{error:e}})),o=e=>a=>(a((0,c.N)(!1)),a({type:r.k,payload:{fileStructure:e}}));var d=l(2631),f=l(4447);const g=({currentStructure:e,breadcrumbClick:a})=>e?t.createElement("div",{className:"media-catalog__breadcrumb"},e&&e.length>0&&e.map(((e,l)=>t.createElement("span",{key:`media-folder__breadcrumb${l}`,onClick:()=>a(e)},e.folderName)))):null;var u=l(6516),E=l.n(u);const _=({currentFolder:e,allowedImageExtensions:a,formatFileSize:l})=>!e||!e.files||e.files.length<1?null:t.createElement("div",{className:"row media-catalog__files small-up-2 medium-up-4 large-up-6 align-center align-middle"},!e.files||e.files.length<1&&t.createElement("span",{className:"media-catalog__no-files"},(0,f.I)("addons.mediacatalog.nofilesfound")),e&&e.files&&e.files.length>0&&e.files.map(((e,n)=>t.createElement(E(),{className:"column",key:`media-catalog__folder-Grid${n}`},t.createElement("div",{className:"media-catalog__files-card"},t.createElement("figure",null,t.createElement("div",{className:"pn-card"},t.createElement("a",{href:e.downloadUrl},e.extension&&t.createElement(t.Fragment,null,e.extension&&t.createElement("div",{className:"media-catalog__files-tag-extension"}," ",e.extension),e&&e.extension&&-1!==a.findIndex((a=>a===e.extension.toLowerCase()))?t.createElement("img",{src:e.largeThumbnailUrl,alt:e.name,loading:"lazy"}):t.createElement("div",{className:`media-catalog__file media-catalog__file--${e.extension.toLowerCase()}`})))),t.createElement("figcaption",null,t.createElement("h4",null,(0,f.I)("addons.mediacatalog.info")),t.createElement("ul",{className:"media-catalog__file-data"},t.createElement("li",null,(0,f.I)("addons.mediacatalog.fileinfo.name"),": ",t.createElement("span",null,e.name)),t.createElement("li",null,(0,f.I)("addons.mediacatalog.fileinfo.width"),": ",t.createElement("span",null,e.frameWidth,"px")),t.createElement("li",null,(0,f.I)("addons.mediacatalog.fileinfo.height"),": ",t.createElement("span",null,e.frameHeight,"px")),t.createElement("li",null,(0,f.I)("addons.mediacatalog.fileinfo.filesize"),": ",t.createElement("span",null,l(e.fileSize))),t.createElement("li",null,(0,f.I)("addons.mediacatalog.fileinfo.fileextension"),": ",t.createElement("span",null,e.extension)))))))))),h=({currentFolder:e,allowedImageExtensions:a,formatFileSize:l})=>!e||!e.files||e.files.length<1?t.createElement("span",{className:"media-catalog__no-files"},(0,f.I)("addons.mediacatalog.nofilesfound")):t.createElement(t.Fragment,null,t.createElement("div",{className:"row media-catalog__table-header"},t.createElement("div",{className:"small-12 medium-2 columns"}," "),t.createElement("div",{className:"small-12 medium-4 columns"},"Description"),t.createElement("div",{className:"small-12 medium-2 columns"},"File size"),t.createElement("div",{className:"small-12 medium-2 columns"},"File extension"),t.createElement("div",{className:"small-12 medium-2 columns"}," ")),t.createElement(E(),{className:"media-catalog__table-data"},e&&e.files&&e.files.length>0&&e.files.map(((e,n)=>t.createElement("div",{className:"row media-catalog__table-row",key:`media-catalog__folder${n}`},t.createElement("div",{className:"small-12 medium-2 columns media-catalog__table-image"},t.createElement("figure",null,e&&e.extension&&-1!==a.findIndex((a=>a===e.extension.toLowerCase()))?t.createElement("img",{src:e.mediumThumbnailUrl,alt:e.name,loading:"lazy"}):t.createElement("div",{className:`media-catalog__file media-catalog__file--small media-catalog__file--${e.extension.toLowerCase()}`}))),t.createElement("div",{className:"small-12 medium-4 columns media-catalog__table-decription"},t.createElement("ul",{className:"media-catalog__file-data"},t.createElement("li",null,(0,f.I)("addons.mediacatalog.fileinfo.name"),": ",t.createElement("span",null,e.name)),t.createElement("li",null,(0,f.I)("addons.mediacatalog.fileinfo.width"),": ",t.createElement("span",null,e.frameWidth,"px")),t.createElement("li",null,(0,f.I)("addons.mediacatalog.fileinfo.height"),": ",t.createElement("span",null,e.frameHeight,"px")))),t.createElement("div",{className:"small-12 medium-2 columns media-catalog__table-file-type"},l(e.fileSize)),t.createElement("div",{className:"small-12 medium-2 columns media-catalog__table-file-size"},e.extension.toLowerCase()),t.createElement("div",{className:"small-12 medium-2 columns media-catalog__table-button text--right"},t.createElement("a",{href:e.downloadUrl},(0,f.I)("addons.mediacatalog.button.download")))))))),p=({filterItems:e})=>{const a=(0,t.useRef)(),[l,n]=(0,t.useState)(""),[i,m]=(0,t.useState)(!1),[c,r]=(0,t.useState)(""),s=()=>{r(l),e(l)};return(0,t.useEffect)((()=>{c&&""!==c.length||(i&&(a.current.value="",s()),m(!0))}),[c]),t.createElement(t.Fragment,null,t.createElement("div",{className:"media-catalog__search-filter-remove"},c&&t.createElement("div",{onClick:()=>{n(""),r("")}},(0,f.I)("addons.mediacatalog.removeactivesearch"),": ",t.createElement("i",null,c))),t.createElement("div",{className:"media-catalog__search"},t.createElement("input",{type:"search",onChange:e=>(e=>{var a=e.target.value;if(n(a),!a||a.length<1&&l)return n(""),void r("")})(e),onKeyPress:e=>(e=>{"Enter"!==e.key&&13!==e.charCode||s()})(e),ref:a,placeholder:(0,f.I)("addons.mediacatalog.searchforfilestext")}),t.createElement("div",{className:"media-catalog__search-button "+(l?"":"media-catalog__search-button--disabled"),onClick:e=>s()},(0,f.I)("addons.mediacatalog.button.search"))))};var v;function N(){return(N=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var l=arguments[a];for(var t in l)Object.prototype.hasOwnProperty.call(l,t)&&(e[t]=l[t])}return e}).apply(this,arguments)}const w=e=>t.createElement("svg",N({xmlns:"http://www.w3.org/2000/svg",height:48,width:48},e),v||(v=t.createElement("path",{d:"M7.05 40q-1.2 0-2.1-.925-.9-.925-.9-2.075V11q0-1.15.9-2.075Q5.85 8 7.05 8h14l3 3h17q1.15 0 2.075.925.925.925.925 2.075v23q0 1.15-.925 2.075Q42.2 40 41.05 40Z"})));var b;function x(){return(x=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var l=arguments[a];for(var t in l)Object.prototype.hasOwnProperty.call(l,t)&&(e[t]=l[t])}return e}).apply(this,arguments)}const I=e=>t.createElement("svg",x({xmlns:"http://www.w3.org/2000/svg",height:48,width:48},e),b||(b=t.createElement("path",{d:"M7 40q-1.15 0-2.075-.925Q4 38.15 4 37V11q0-1.15.925-2.075Q5.85 8 7 8h14.05l3 3H41q1.15 0 2.075.925Q44 12.85 44 14H7v23l5.1-20H47l-5.35 20.7q-.3 1.2-1.1 1.75T38.5 40Z"}))),k=({mediaFolderId:e,alternativeFolderName:a,useAltMediaView:l})=>{const r=(0,n.I0)(),[u,E]=(0,t.useState)({}),[v,N]=(0,t.useState)(a),[b,x]=(0,t.useState)(l),[k,y]=(0,t.useState)("grid"),[C,S]=(0,t.useState)([]),[F,z]=(0,t.useState)(null),{fileStructure:j}=(0,n.v9)((e=>e.mediaCatalog)),D=e=>{const a={folderName:e};S([...C,a])},q=["jpg","jpeg","png","gif","webp","svg"],O=e=>{var a=C.findIndex((a=>a.folderName==e.folderName));null==a||a<0||(E(0===a?j:j.folderData[a-1]),S(C.slice(0,a+1)))},$=()=>{const e={folderName:v||j.folderName};S([e])},M=e=>{if(!e)return"";switch(Math.floor((e.toString().length-1)/3)){case 0:case 1:return H(e/1e3)+"KB";case 2:return H(e/1e6)+"MB";case 3:return H(e/1e9)+"TB"}return""},H=e=>e.toFixed(2).replace(".00","");(0,t.useEffect)((()=>{e&&r((e=>(a,l)=>(a((0,c.N)(!0)),(0,i.U2)("/api/mediacatalog/getMediaData?folderId="+e).then((e=>e.json())).then((e=>a(o(e)))).catch((e=>a((0,m.K)(e,(e=>s(e))))))))(e))}),[]);const L=e=>{let a=[];return e&&(e.files&&e.files.map(((l,t)=>{a.push({...l,parentName:e.parentName})})),e.folderData&&e.folderData.map(((e,l)=>{a=a.concat(L(e))}))),a};return(0,t.useEffect)((()=>{if(j){E(j),j.folderName&&$();const e=L(j);z(new d.Z(e,{keys:["name","extension"],threshold:.3,distance:10}))}}),[j]),t.createElement("div",{className:"media-catalog"},t.createElement("div",{className:"row text--center media-catalog__header"},t.createElement("section",{className:"small-12 columns"},t.createElement(p,{filterItems:e=>{if($(),e&&""!==e.trim().length){if(F){const a=e.trim(),l=F.search(a);if(l){const e=l.map((e=>e.item)),a={folderName:v||j.folderName,files:e};E(a)}}}else E(j)}})),t.createElement("section",{className:"small-12 columns"},t.createElement(g,{currentStructure:C,breadcrumbClick:O}))),u.folderData&&t.createElement("div",{className:"media-catalog__folder-data-container"},t.createElement("div",{className:"row media-catalog__folder-data align-center "+(b?"small-up-2 medium-up-4 large-up-6":"")},u.folderData&&u.folderData.length>0&&u.folderData.map(((e,a)=>b?t.createElement("div",{className:"column",key:`media-folder__folder${a}`},t.createElement("div",null,t.createElement("div",{className:"pn-card",onClick:()=>{E(e),D(e.folderName)}},t.createElement("div",{className:"media-catalog__folder-data-item"},e.folderName),t.createElement("div",{className:"media-catalog__folder-text"},"Folder")))):t.createElement("div",{className:"column small-6 medium-1",key:`media-folder__folder${a}`,onClick:()=>{E(e),D(e.folderName)}},t.createElement("div",{className:"media-catalog__icon-folder"},t.createElement(w,{width:"48",height:"48",className:"media-catalog__icon-folder-item media-catalog__icon-folder-item--closed",alt:(0,f.I)("addons.mediacatalog.button.folder")}),t.createElement(I,{width:"48",height:"48",className:"media-catalog__icon-folder-item media-catalog__icon-folder-item--open",alt:(0,f.I)("addons.mediacatalog.button.folderopen")})),t.createElement("div",{className:"media-catalog__icon-folder-text"},e.folderName)))))),j.files&&t.createElement("section",{className:`${k}-view`},t.createElement("div",{className:"row"},t.createElement("h2",{className:"column text--center media-catalog__folder-heading"},t.createElement("div",{className:"media-catalog__view-toggler"},t.createElement("span",{className:"media-catalog__view-toggler-grid "+("grid"===k?"media-catalog__view-toggler-grid--active":""),onClick:()=>y("grid")}),t.createElement("span",{className:"media-catalog__view-toggler-list "+("list"===k?"media-catalog__view-toggler-list--active":""),onClick:()=>y("list")})),C&&C.length>1&&t.createElement("span",{className:"media-catalog__folder-back-link",onClick:()=>O(C[C.length-2])},(0,f.I)("addons.mediacatalog.button.stepoutoffolder")),"Files in folder: ",t.createElement("span",null,1===C.length?v||j.folderName:u.folderName))),"list"===k?t.createElement(h,{currentFolder:u,allowedImageExtensions:q,formatFileSize:M}):t.createElement(_,{currentFolder:u,allowedImageExtensions:q,formatFileSize:M})))}}}]);
//# sourceMappingURL=431.922928e3ec3454916a4b.js.map