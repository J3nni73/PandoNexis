(self.webpackChunk=self.webpackChunk||[]).push([[783],{1783:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>y});var l=t(7378),m=t(8036),r=t(4447),n=t(9453),s=t(5319),o=t(8997);const c="/api/mypageperson",i=e=>({type:n.Lt,payload:{mode:e}}),p=(e=n.wO.List)=>a=>(0,s.U2)(c).then((e=>e.json())).then((t=>{a(d(t,e))})).catch((e=>a((0,o.K)(e,(e=>u(e)))))),d=(e,a)=>({type:n.n4,payload:{list:e,mode:a}}),u=e=>({type:n.HR,payload:{error:e}}),_=({onEdit:e})=>{const a=(0,m.I0)(),t=(0,m.v9)((e=>e.myPage.persons.list)),[n,i]=(0,l.useState)({}),d=(e,a)=>{i((t=>({...t,[e]:a})))};return l.createElement("div",{className:"simple-table"},l.createElement("div",{className:"row medium-unstack no-margin simple-table__header"},l.createElement("div",{className:"columns"},(0,r.I)("mypage.person.name")),l.createElement("div",{className:"columns"},(0,r.I)("mypage.person.email")),l.createElement("div",{className:"columns"},(0,r.I)("mypage.person.phone")),l.createElement("div",{className:"columns"},(0,r.I)("mypage.person.role")),l.createElement("div",{className:"columns medium-2 hide-for-small-only"})),t&&t.map((t=>l.createElement("div",{className:"row medium-unstack no-margin",key:t.systemId},l.createElement("div",{className:"columns"},t.firstName," ",t.lastName),l.createElement("div",{className:"columns"},t.email||""),l.createElement("div",{className:"columns"},t.phone||""),l.createElement("div",{className:"columns"},t.role),l.createElement("div",{className:"columns medium-2"},t.editable&&l.createElement(l.Fragment,null,l.createElement("a",{onClick:()=>e(t),className:"table__icon table__icon--edit",title:(0,r.I)("Edit")}),!n[t.systemId]&&l.createElement("a",{onClick:()=>d(t.systemId,!0),className:"table__icon table__icon--delete",title:(0,r.I)("Remove")}),n[t.systemId]&&l.createElement("a",{className:"table__icon table__icon--accept",onClick:()=>{return a((e=t.systemId,a=>(0,s.Od)(c,e).then((()=>a(p()))).catch((e=>a((0,o.K)(e,(e=>u(e))))))));var e},title:(0,r.I)("Accept")}),n[t.systemId]&&l.createElement("a",{className:"table__icon table__icon--cancel",onClick:()=>d(t.systemId,!1),title:(0,r.I)("Cancel")})))))))};var v=t(2479);const N=(0,v.Ry)().shape({phone:(0,v.Z_)().required((0,r.I)("validation.required")),email:(0,v.Z_)().required((0,r.I)("validation.required")).email((0,r.I)("validation.email")),lastName:(0,v.Z_)().required((0,r.I)("validation.required")),firstName:(0,v.Z_)().required((0,r.I)("validation.required"))}),E=({person:e,onDismiss:a})=>{const t=(0,m.I0)(),i=(0,m.v9)((e=>e.myPage.persons.errors))||{},[d,_]=(0,l.useState)(e);(0,l.useEffect)((()=>{_(e)}),[_,e]);const v=(e,a)=>{_((t=>({...t,[e]:a})))};return l.createElement("div",null,l.createElement("h2",null,(0,r.I)(d.systemId?"mypage.person.edittitle":"mypage.person.addtitle")),l.createElement("div",{className:"row"},l.createElement("div",{className:"columns small-12 medium-8"},l.createElement("label",{className:"form__label",htmlFor:"firstName"},(0,r.I)("mypage.person.firstname")),l.createElement("input",{className:"form__input",id:"firstName",name:"firstName",type:"text",autoComplete:"given-name",value:d.firstName||"",onChange:e=>v("firstName",e.target.value)}),i.firstName&&l.createElement("span",{className:"form__validator--error form__validator--top-narrow"},i.firstName[0])),l.createElement("div",{className:"columns small-12 medium-8"},l.createElement("label",{className:"form__label",htmlFor:"lastName"},(0,r.I)("mypage.person.lastname")),l.createElement("input",{className:"form__input",id:"lastName",name:"lastName",type:"text",autoComplete:"family-name",value:d.lastName||"",onChange:e=>v("lastName",e.target.value)}),i.lastName&&l.createElement("span",{className:"form__validator--error form__validator--top-narrow"},i.lastName[0]))),l.createElement("div",{className:"row"},l.createElement("div",{className:"columns small-12 medium-8"},l.createElement("label",{className:"form__label",htmlFor:"email"},(0,r.I)("mypage.person.email")),l.createElement("input",{className:"form__input",id:"email",name:"email",type:"email",autoComplete:"email",value:d.email||"",onChange:e=>v("email",e.target.value)}),i.email&&l.createElement("span",{className:"form__validator--error form__validator--top-narrow"},i.email[0])),l.createElement("div",{className:"columns small-12 medium-8"},l.createElement("label",{className:"form__label",htmlFor:"phone"},(0,r.I)("mypage.person.phone")),l.createElement("input",{className:"form__input",id:"phone",name:"phone",type:"tel",autoComplete:"tel",value:d.phone||"",onChange:e=>v("phone",e.target.value)}),i.phone&&l.createElement("span",{className:"form__validator--error form__validator--top-narrow"},i.phone[0]))),l.createElement("div",{className:"row"},l.createElement("div",{className:"columns small-12 medium-8"},l.createElement("label",{className:"form__control"},l.createElement("input",{type:"radio",name:"role",className:"form__radio",value:n.ZP.role.approver,checked:d.role===n.ZP.role.approver,onChange:e=>v("role",e.target.value)}),(0,r.I)("mypage.person.role.approver"))),l.createElement("div",{className:"columns small-12 medium-8"},l.createElement("label",{className:"form__control"},l.createElement("input",{type:"radio",name:"role",className:"form__radio",value:n.ZP.role.buyer,checked:d.role===n.ZP.role.buyer,onChange:e=>v("role",e.target.value)}),(0,r.I)("mypage.person.role.buyer")))),i.general&&l.createElement("div",null,i.general[0]),l.createElement("button",{className:"form__button",onClick:a},(0,r.I)("general.cancel")),l.createElement("span",{className:"form__space"}),l.createElement("button",{className:"form__button",onClick:()=>{d&&d.editable&&N.validate(d).then((()=>{d.systemId?t((e=>a=>(0,s.gz)(c,e).then((()=>a(p()))).catch((e=>a((0,o.K)(e,(e=>u(e)))))))(d)):t((e=>a=>(0,s.v_)(c,e).then((()=>a(p()))).catch((e=>a((0,o.K)(e,(e=>u(e)))))))(d))})).catch((e=>t(u(e))))}},(0,r.I)("general.save")))},y=()=>{const e=(0,m.v9)((e=>e.myPage.persons.mode)),a=(0,m.I0)();(0,l.useEffect)((()=>{a(p())}),[a]);const[t,s]=(0,l.useState)({}),o=(0,l.useCallback)((e=>{s(e),a(i(n.wO.Edit))}),[s,a]),c=(0,l.useCallback)((()=>{s({}),a(i(n.wO.List))}),[s,a]);return l.createElement(l.Fragment,null,e!==n.wO.List&&l.createElement(E,{person:t,onDismiss:c}),e===n.wO.List&&l.createElement(l.Fragment,null,l.createElement("h2",null,(0,r.I)("mypage.person.title")),l.createElement("p",null,l.createElement("b",null,(0,r.I)("mypage.person.subtitle"))),l.createElement("button",{className:"form__button",onClick:()=>o({role:n.ZP.role.approver,editable:!0})},(0,r.I)("mypage.person.add")),l.createElement(_,{onEdit:o})))}}}]);
//# sourceMappingURL=783.9dc0e7068f947cfd507d.js.map