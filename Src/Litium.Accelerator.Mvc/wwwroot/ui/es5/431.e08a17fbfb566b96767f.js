(self.webpackChunk=self.webpackChunk||[]).push([[431],{8431:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return P}});a(3938),a(5699),a(2410),a(3238),a(895),a(911),a(2077),a(6056),a(266),a(3526),a(1013),a(5901),a(2189),a(1047),a(7460),a(5769),a(4078),a(3352),a(5610),a(2571),a(8010),a(252),a(5849),a(4009);var n=a(7378),l=a(8036),r=a(9628),i=(a(2756),a(8997)),o=a(4938),c=a(5515),m=function(e){return function(t,a){return t((0,o.N)(!1)),t({type:c.k,payload:{error:e}})}},s=function(e){return function(t){return t((0,o.N)(!1)),t({type:c.k,payload:{fileStructure:e}})}},d=a(2631),u=a(4447),f=function(e){var t=e.currentStructure,a=e.breadcrumbClick;return t?n.createElement("div",{className:"media-catalog__breadcrumb"},t&&t.length>0&&t.map((function(e,t){return n.createElement("span",{key:"media-folder__breadcrumb".concat(t),onClick:function(){return a(e)}},e.folderName)}))):null},g=a(6516),p=a.n(g),v=function(e){var t=e.currentFolder,a=e.allowedImageExtensions,l=e.formatFileSize;return!t||!t.files||t.files.length<1?null:n.createElement("div",{className:"row media-catalog__files small-up-2 medium-up-4 large-up-6 align-center align-middle"},!t.files||t.files.length<1&&n.createElement("span",{className:"media-catalog__no-files"},(0,u.I)("addons.mediacatalog.nofilesfound")),t&&t.files&&t.files.length>0&&t.files.map((function(e,t){return n.createElement(p(),{className:"column",key:"media-catalog__folder-Grid".concat(t)},n.createElement("div",{className:"media-catalog__files-card"},n.createElement("figure",null,n.createElement("div",{className:"pn-card"},n.createElement("a",{href:e.downloadUrl},e.extension&&n.createElement(n.Fragment,null,e.extension&&n.createElement("div",{className:"media-catalog__files-tag-extension"}," ",e.extension),e&&e.extension&&-1!==a.findIndex((function(t){return t===e.extension.toLowerCase()}))?n.createElement("img",{src:e.largeThumbnailUrl,alt:e.name,loading:"lazy"}):n.createElement("div",{className:"media-catalog__file media-catalog__file--".concat(e.extension.toLowerCase())})))),n.createElement("figcaption",null,n.createElement("h4",null,(0,u.I)("addons.mediacatalog.info")),n.createElement("ul",{className:"media-catalog__file-data"},n.createElement("li",null,(0,u.I)("addons.mediacatalog.fileinfo.name"),": ",n.createElement("span",null,e.name)),n.createElement("li",null,(0,u.I)("addons.mediacatalog.fileinfo.width"),": ",n.createElement("span",null,e.frameWidth,"px")),n.createElement("li",null,(0,u.I)("addons.mediacatalog.fileinfo.height"),": ",n.createElement("span",null,e.frameHeight,"px")),n.createElement("li",null,(0,u.I)("addons.mediacatalog.fileinfo.filesize"),": ",n.createElement("span",null,l(e.fileSize))),n.createElement("li",null,(0,u.I)("addons.mediacatalog.fileinfo.fileextension"),": ",n.createElement("span",null,e.extension)))))))})))},h=function(e){var t=e.currentFolder,a=e.allowedImageExtensions,l=e.formatFileSize;return!t||!t.files||t.files.length<1?n.createElement("span",{className:"media-catalog__no-files"},(0,u.I)("addons.mediacatalog.nofilesfound")):n.createElement(n.Fragment,null,n.createElement("div",{className:"row media-catalog__table-header"},n.createElement("div",{className:"small-12 medium-2 columns"}," "),n.createElement("div",{className:"small-12 medium-4 columns"},"Description"),n.createElement("div",{className:"small-12 medium-2 columns"},"File size"),n.createElement("div",{className:"small-12 medium-2 columns"},"File extension"),n.createElement("div",{className:"small-12 medium-2 columns"}," ")),n.createElement(p(),{className:"media-catalog__table-data"},t&&t.files&&t.files.length>0&&t.files.map((function(e,t){return n.createElement("div",{className:"row media-catalog__table-row",key:"media-catalog__folder".concat(t)},n.createElement("div",{className:"small-12 medium-2 columns media-catalog__table-image"},n.createElement("figure",null,e&&e.extension&&-1!==a.findIndex((function(t){return t===e.extension.toLowerCase()}))?n.createElement("img",{src:e.mediumThumbnailUrl,alt:e.name,loading:"lazy"}):n.createElement("div",{className:"media-catalog__file media-catalog__file--small media-catalog__file--".concat(e.extension.toLowerCase())}))),n.createElement("div",{className:"small-12 medium-4 columns media-catalog__table-decription"},n.createElement("ul",{className:"media-catalog__file-data"},n.createElement("li",null,(0,u.I)("addons.mediacatalog.fileinfo.name"),": ",n.createElement("span",null,e.name)),n.createElement("li",null,(0,u.I)("addons.mediacatalog.fileinfo.width"),": ",n.createElement("span",null,e.frameWidth,"px")),n.createElement("li",null,(0,u.I)("addons.mediacatalog.fileinfo.height"),": ",n.createElement("span",null,e.frameHeight,"px")))),n.createElement("div",{className:"small-12 medium-2 columns media-catalog__table-file-type"},l(e.fileSize)),n.createElement("div",{className:"small-12 medium-2 columns media-catalog__table-file-size"},e.extension.toLowerCase()),n.createElement("div",{className:"small-12 medium-2 columns media-catalog__table-button text--right"},n.createElement("a",{href:e.downloadUrl},(0,u.I)("addons.mediacatalog.button.download"))))}))))};function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,l=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(e){l=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(l)throw r}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var b,y=function(e){var t=e.filterItems,a=(0,n.useRef)(),l=E((0,n.useState)(""),2),r=l[0],i=l[1],o=E((0,n.useState)(!1),2),c=o[0],m=o[1],s=E((0,n.useState)(""),2),d=s[0],f=s[1],g=function(){f(r),t(r)};return(0,n.useEffect)((function(){d&&""!==d.length||(c&&(a.current.value="",g()),m(!0))}),[d]),n.createElement(n.Fragment,null,n.createElement("div",{className:"media-catalog__search-filter-remove"},d&&n.createElement("div",{onClick:function(){i(""),f("")}},(0,u.I)("addons.mediacatalog.removeactivesearch"),": ",n.createElement("i",null,d))),n.createElement("div",{className:"media-catalog__search"},n.createElement("input",{type:"search",onChange:function(e){return function(e){var t=e.target.value;if(i(t),!t||t.length<1&&r)return i(""),void f("")}(e)},onKeyPress:function(e){return function(e){"Enter"!==e.key&&13!==e.charCode||g()}(e)},ref:a,placeholder:(0,u.I)("addons.mediacatalog.searchforfilestext")}),n.createElement("div",{className:"media-catalog__search-button ".concat(r?"":"media-catalog__search-button--disabled"),onClick:function(e){return g()}},(0,u.I)("addons.mediacatalog.button.search"))))};function N(){return(N=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var w,I=e=>n.createElement("svg",N({xmlns:"http://www.w3.org/2000/svg",height:48,width:48},e),b||(b=n.createElement("path",{d:"M7.05 40q-1.2 0-2.1-.925-.9-.925-.9-2.075V11q0-1.15.9-2.075Q5.85 8 7.05 8h14l3 3h17q1.15 0 2.075.925.925.925.925 2.075v23q0 1.15-.925 2.075Q42.2 40 41.05 40Z"})));function x(){return(x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var S=e=>n.createElement("svg",x({xmlns:"http://www.w3.org/2000/svg",height:48,width:48},e),w||(w=n.createElement("path",{d:"M7 40q-1.15 0-2.075-.925Q4 38.15 4 37V11q0-1.15.925-2.075Q5.85 8 7 8h14.05l3 3H41q1.15 0 2.075.925Q44 12.85 44 14H7v23l5.1-20H47l-5.35 20.7q-.3 1.2-1.1 1.75T38.5 40Z"})));function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function j(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(Object(a),!0).forEach((function(t){k(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function k(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function C(e){return function(e){if(Array.isArray(e))return D(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||A(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,l=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(e){l=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(l)throw r}}return a}(e,t)||A(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){if(e){if("string"==typeof e)return D(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?D(e,t):void 0}}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var P=function(e){var t=e.mediaFolderId,a=e.alternativeFolderName,c=e.useAltMediaView,g=(0,l.I0)(),p=F((0,n.useState)({}),2),E=p[0],_=p[1],b=F((0,n.useState)(a),2),N=b[0],w=(b[1],F((0,n.useState)(c),2)),x=w[0],O=(w[1],F((0,n.useState)("grid"),2)),k=O[0],A=O[1],D=F((0,n.useState)([]),2),P=D[0],z=D[1],q=F((0,n.useState)(null),2),M=q[0],T=q[1],U=(0,l.v9)((function(e){return e.mediaCatalog})).fileStructure,H=function(e){var t={folderName:e};z([].concat(C(P),[t]))},L=["jpg","jpeg","png","gif","webp","svg"],Q=function(e){var t=P.findIndex((function(t){return t.folderName==e.folderName}));null==t||t<0||(_(0===t?U:U.folderData[t-1]),z(P.slice(0,t+1)))},B=function(){var e={folderName:N||U.folderName};z([e])},K=function(e){if(!e)return"";switch(Math.floor((e.toString().length-1)/3)){case 0:case 1:return V(e/1e3)+"KB";case 2:return V(e/1e6)+"MB";case 3:return V(e/1e9)+"TB"}return""},V=function(e){return e.toFixed(2).replace(".00","")};(0,n.useEffect)((function(){t&&g(function(e){return function(t,a){return t((0,o.N)(!0)),(0,r.U2)("/api/mediacatalog/getMediaData?folderId="+e).then((function(e){return e.json()})).then((function(e){return t(s(e))})).catch((function(e){return t((0,i.K)(e,(function(e){return m(e)})))}))}}(t))}),[]);var Z=function e(t){var a=[];return t&&(t.files&&t.files.map((function(e,n){a.push(j(j({},e),{},{parentName:t.parentName}))})),t.folderData&&t.folderData.map((function(t,n){a=a.concat(e(t))}))),a};return(0,n.useEffect)((function(){if(U){_(U),U.folderName&&B();var e=Z(U);T(new d.Z(e,{keys:["name","extension"],threshold:.3,distance:10}))}}),[U]),n.createElement("div",{className:"media-catalog"},n.createElement("div",{className:"row text--center media-catalog__header"},n.createElement("section",{className:"small-12 columns"},n.createElement(y,{filterItems:function(e){if(B(),e&&""!==e.trim().length){if(M){var t=e.trim(),a=M.search(t);if(a){var n=a.map((function(e){return e.item})),l={folderName:N||U.folderName,files:n};_(l)}}}else _(U)}})),n.createElement("section",{className:"small-12 columns"},n.createElement(f,{currentStructure:P,breadcrumbClick:Q}))),E.folderData&&n.createElement("div",{className:"media-catalog__folder-data-container"},n.createElement("div",{className:"row media-catalog__folder-data align-center ".concat(x?"small-up-2 medium-up-4 large-up-6":"")},E.folderData&&E.folderData.length>0&&E.folderData.map((function(e,t){return x?n.createElement("div",{className:"column",key:"media-folder__folder".concat(t)},n.createElement("div",null,n.createElement("div",{className:"pn-card",onClick:function(){_(e),H(e.folderName)}},n.createElement("div",{className:"media-catalog__folder-data-item"},e.folderName),n.createElement("div",{className:"media-catalog__folder-text"},"Folder")))):n.createElement("div",{className:"column small-6 medium-1",key:"media-folder__folder".concat(t),onClick:function(){_(e),H(e.folderName)}},n.createElement("div",{className:"media-catalog__icon-folder"},n.createElement(I,{width:"48",height:"48",className:"media-catalog__icon-folder-item media-catalog__icon-folder-item--closed",alt:(0,u.I)("addons.mediacatalog.button.folder")}),n.createElement(S,{width:"48",height:"48",className:"media-catalog__icon-folder-item media-catalog__icon-folder-item--open",alt:(0,u.I)("addons.mediacatalog.button.folderopen")})),n.createElement("div",{className:"media-catalog__icon-folder-text"},e.folderName))})))),U.files&&n.createElement("section",{className:"".concat(k,"-view")},n.createElement("div",{className:"row"},n.createElement("h2",{className:"column text--center media-catalog__folder-heading"},n.createElement("div",{className:"media-catalog__view-toggler"},n.createElement("span",{className:"media-catalog__view-toggler-grid ".concat("grid"===k?"media-catalog__view-toggler-grid--active":""),onClick:function(){return A("grid")}}),n.createElement("span",{className:"media-catalog__view-toggler-list ".concat("list"===k?"media-catalog__view-toggler-list--active":""),onClick:function(){return A("list")}})),P&&P.length>1&&n.createElement("span",{className:"media-catalog__folder-back-link",onClick:function(){return Q(P[P.length-2])}},(0,u.I)("addons.mediacatalog.button.stepoutoffolder")),"Files in folder: ",n.createElement("span",null,1===P.length?N||U.folderName:E.folderName))),"list"===k?n.createElement(h,{currentFolder:E,allowedImageExtensions:L,formatFileSize:K}):n.createElement(v,{currentFolder:E,allowedImageExtensions:L,formatFileSize:K})))}}}]);
//# sourceMappingURL=431.e08a17fbfb566b96767f.js.map